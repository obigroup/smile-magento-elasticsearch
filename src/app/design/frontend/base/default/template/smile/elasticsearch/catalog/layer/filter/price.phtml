<?php
/**
 * Price slider filter rendering.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Smile Searchandising Suite to newer
 * versions in the future.
 *
 * @category  Smile
 * @package   Smile_ElasticSearch
 * @author    Aurelien FOUCRET <aurelien.foucret@smile.fr>
 * @copyright 2013 Smile
 * @license   Apache License Version 2.0
 */?>
<div class="range-slider" id="<?php echo $this->getNameInLayout(); ?>-slider">
    <div class="limits-container">
        <span class="limits min"></span>
        <span class="limits max"></span>
        <div class="clear"></div>
    </div>
	<div class="slider-bkg">
	    <div class="handle min"></div>
	    <div class="handle max"></div>
	</div>
	<div class="validate-button"><button class="valid button"><span><span><?php echo $this->__('OK'); ?></span></span></button></div>
	<em class="count"></em>
	<div class="clear"></div>
</div>

<script type="text/javascript">
<!--
    var sliderConfig = {
        range                 : $R(<?php echo $this->getMinPriceInt(true); ?>, <?php echo $this->getMaxPriceInt(true); ?>),
        values                : <?php echo Mage::helper('core/data')->jsonEncode($this->getInterval()); ?>,
        allowedIntervals      : <?php echo Mage::helper('core/data')->jsonEncode($this->getAllowedIntervals()); ?>,
        rootNode              : $("<?php echo $this->getNameInLayout(); ?>-slider"),
        countProductTemplates : {
            'multiple' : new Template("<?php echo $this->__('#{count} products');?>"),
            'one'      : new Template("<?php echo $this->__('#{count} product');?>"),
            'empty'    : new Template("<?php echo $this->__('No product found in this price range.');?>"),
        },
        valueFormat : function(value) {
            var priceFormat    = <?php echo $this->getJsPriceFormat(); ?>;
            priceFormat.precision = priceFormat.requiredPrecision = 0;
            return formatCurrency(value.toFixed(0), priceFormat);
        },
        requestVar : "<?php echo $this->getRequestVar(); ?>",
        filterTemplate : new Template("<?php echo $this->getFilterJsTemplate(); ?>")

    };

    Es.rangeSlider(sliderConfig);
-->
</script>